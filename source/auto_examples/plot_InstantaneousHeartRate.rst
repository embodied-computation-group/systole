
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples\plot_InstantaneousHeartRate.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_plot_InstantaneousHeartRate.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_plot_InstantaneousHeartRate.py:


Instantaneous Heart Rate
========================

This example show how to record PPG signals using the `Nonin 3012LP
Xpod USB pulse oximeter <https://www.nonin.com/products/xpod/>`_ and the `Nonin
8000SM 'soft-clip' fingertip sensors <https://www.nonin.com/products/8000s/>`_.
Peaks are automatically labelled online and the instantaneous heart rate is
plotted.

.. GENERATED FROM PYTHON SOURCE LINES 11-22

.. code-block:: default


    # Author: Nicolas Legrand <nicolas.legrand@cfin.au.dk>
    # Licence: GPL v3

    import matplotlib.pyplot as plt
    import pandas as pd
    from systole import serialSim
    from systole.recording import Oximeter
    from systole.plots import plot_raw, plot_rr









.. GENERATED FROM PYTHON SOURCE LINES 23-27

Recording
---------
For the demonstration purpose, here we simulate data acquisition through
the pulse oximeter using pre-recorded signal.

.. GENERATED FROM PYTHON SOURCE LINES 27-30

.. code-block:: default


    ser = serialSim()








.. GENERATED FROM PYTHON SOURCE LINES 31-34

If you want to enable online data acquisition, you should uncomment the
following lines and provide the reference of the COM port where the pulse
oximeter is plugged in.

.. GENERATED FROM PYTHON SOURCE LINES 36-40

.. code-block:: python

  import serial
  ser = serial.Serial('COM4')  # Change this value according to your setup

.. GENERATED FROM PYTHON SOURCE LINES 40-45

.. code-block:: default


    # Create an Oxymeter instance, initialize recording and record for 10 seconds
    oxi = Oximeter(serial=ser, sfreq=75).setup()
    oxi.read(30)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Reset input buffer

    <systole.recording.Oximeter object at 0x00000288967EAE48>



.. GENERATED FROM PYTHON SOURCE LINES 46-48

Plotting
--------

.. GENERATED FROM PYTHON SOURCE LINES 48-60

.. code-block:: default

    fig, ax = plt.subplots(3, 1, figsize=(13, 8), sharex=True)

    plot_raw(oxi.recording, sfreq=75, show_heart_rate=False, ax=ax[0])

    times = pd.to_datetime(oxi.times, unit="s", origin="unix")

    ax[1].plot(times, oxi.peaks, "#55a868")
    ax[1].set_title("Peaks vector")
    ax[1].set_ylabel("Peak\n detection")

    plot_rr(oxi.peaks, input_type='peaks', ax=ax[2])

    plt.tight_layout()


.. image:: /auto_examples/images/sphx_glr_plot_InstantaneousHeartRate_001.png
    :alt: PPG recording, Peaks vector, Instantaneous heart rate
    :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  32.002 seconds)


.. _sphx_glr_download_auto_examples_plot_InstantaneousHeartRate.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_InstantaneousHeartRate.py <plot_InstantaneousHeartRate.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_InstantaneousHeartRate.ipynb <plot_InstantaneousHeartRate.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
